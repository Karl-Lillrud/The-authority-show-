<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Episode ToDo</title>
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/taskmanagement/taskmanagement.css') }}"
  />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <div class="episode-selector">
            <button id="episodeDropdownBtn" class="btn btn-outline">
              <span id="currentEpisodeNumber">Episode 42</span>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div id="episodeDropdown" class="dropdown-content">
              <!-- Episodes will be populated by JavaScript -->
            </div>
          </div>
          <h1 id="episodeTitle" class="episode-title">The Future of Podcasting</h1>
          <div class="episode-meta">
            <i class="fas fa-calendar"></i>
            <span id="recordingDate">Recording Date: 2025-05-01</span>
            <button class="btn-icon">
              <i class="fas fa-edit"></i>
            </button>
          </div>
        </div>
        <div class="header-right">
          <button class="btn btn-outline">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </button>
          <button class="btn btn-primary">
            <i class="fas fa-plus"></i>
            <span>New Episode</span>
          </button>
        </div>
      </div>

      <div class="progress-tracker">
        <div class="progress-header">
          <span class="progress-label">Episode Progress</span>
          <span id="progressText" class="progress-text">8 of 15 tasks completed (53%)</span>
        </div>
        <div class="progress-bar-bg">
          <div id="progressBar" class="progress-bar" style="width: 53%"></div>
        </div>
      </div>
    </header>

    <div class="main-content">
      <!-- Left Sidebar -->
      <div class="sidebar left-sidebar">
        <div class="card">
          <div class="card-content">
            <h2 class="section-title">Templates</h2>
            <div id="templateSelector" class="template-selector">
              <!-- Templates will be populated by JavaScript -->
            </div>

            <div class="team-section">
              <h3 class="subsection-title">Team</h3>
              <div class="team-members">
                <div class="team-member">
                  <div class="avatar bg-blue">JD</div>
                  <span>John Doe (Host)</span>
                </div>
                <div class="team-member">
                  <div class="avatar bg-green">AS</div>
                  <span>Alice Smith (Producer)</span>
                </div>
                <div class="team-member">
                  <div class="avatar bg-purple">BJ</div>
                  <span>Bob Johnson (Editor)</span>
                </div>
                <button class="btn btn-outline btn-sm btn-full">
                  <i class="fas fa-plus"></i>
                  Add Team Member
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="content-area">
        <div class="tabs">
          <div class="tabs-list">
            <button class="tab-btn active" data-tab="tasks">
              <i class="fas fa-check-circle"></i>
              <span>Tasks</span>
            </button>
            <button class="tab-btn" data-tab="kanban">
              <i class="fas fa-columns"></i>
              <span>Kanban</span>
            </button>
            <button class="tab-btn" data-tab="dependencies">
              <i class="fas fa-file-alt"></i>
              <span>Dependencies</span>
            </button>
            <button class="tab-btn" data-tab="workspace">
              <i class="fas fa-laptop"></i>
              <span>Workspace</span>
            </button>
          </div>

          <div class="tab-content">
            <!-- Tasks Tab -->
            <div id="tasks-tab" class="tab-pane active">
              <div class="card">
                <div class="card-content">
                  <div class="tab-header">
                    <h2 class="section-title">Episode Tasks</h2>
                    <div class="tab-actions">
                      <button class="btn btn-outline btn-sm">
                        <i class="fas fa-copy"></i>
                        <span>Duplicate</span>
                      </button>
                      <button class="btn btn-outline btn-sm">
                        <i class="fas fa-edit"></i>
                        <span>Edit Template</span>
                      </button>
                    </div>
                  </div>
                  <div id="taskList" class="task-list">
                    <!-- Tasks will be populated by JavaScript -->
                  </div>
                  <button class="btn btn-primary btn-full mt-4">
                    <i class="fas fa-plus"></i>
                    Add Custom Task
                  </button>
                </div>
              </div>
            </div>

            <!-- Kanban Tab -->
            <div id="kanban-tab" class="tab-pane">
              <div class="card">
                <div class="card-content">
                  <div class="tab-header">
                    <h2 class="section-title">Kanban Board</h2>
                    <button class="btn btn-outline btn-sm">
                      <i class="fas fa-cog"></i>
                      <span>Board Settings</span>
                    </button>
                  </div>
                  <div id="kanbanBoard" class="kanban-board">
                    <!-- Kanban columns will be populated by JavaScript -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Dependencies Tab -->
            <div id="dependencies-tab" class="tab-pane">
              <div class="card">
                <div class="card-content">
                  <h2 class="section-title">Dependency Management</h2>
                  <div id="dependencyView" class="dependency-view">
                    <!-- Dependencies will be populated by JavaScript -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Workspace Tab -->
            <div id="workspace-tab" class="tab-pane">
              <div class="card">
                <div class="card-content">
                  <h2 class="section-title">Workspace</h2>
                  <div id="workspaceArea" class="workspace-area">
                    <div class="workspace-placeholder">
                      <i class="fas fa-laptop"></i>
                      <h3>No task selected</h3>
                      <p>Select a task from the task list to open it in the workspace. Tasks with the <i class="fas fa-laptop"></i> icon can be worked on directly in this workspace.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Sidebar (Timeline) -->
      <div id="timelineSidebar" class="sidebar right-sidebar">
        <button id="toggleTimelineBtn" class="toggle-timeline-btn">
          <i class="fas fa-chevron-right"></i>
        </button>
        <div class="card">
          <div class="card-content">
            <div class="tab-header">
              <h2 class="section-title">
                <i class="fas fa-clock"></i>
                Timeline
              </h2>
            </div>
            <div class="timeline-badges">
              <span class="badge">Recording: <span id="timelineRecordingDate">2025-05-01</span></span>
              <span class="badge">Release: <span id="timelineReleaseDate">2025-05-08</span></span>
            </div>
            <div id="timeline" class="timeline">
              <!-- Timeline will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="card">
        <div class="card-content">
          <div class="about-section">
            <i class="fas fa-info-circle"></i>
            <div>
              <h3>About Episode ToDo</h3>
              <p>Episode ToDo is a workflow management tool designed specifically for podcast production teams. It allows podcasters to create, track, and manage recurring tasks for each episode with customizable templates, dependency management, and team collaboration features.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Task Detail Modal -->
  <div id="taskModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTaskTitle">Task Title</h2>
        <button id="closeModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <p id="modalTaskDescription">Task description will appear here.</p>
        <div class="modal-section">
          <h4>Dependencies:</h4>
          <ul id="modalTaskDependencies" class="modal-list">
            <!-- Dependencies will be populated by JavaScript -->
          </ul>
        </div>
        <div class="modal-meta">
          <div class="meta-item">
            <i class="fas fa-clock"></i>
            <span>Due: <span id="modalTaskDueDate">Date</span></span>
          </div>
          <div class="meta-item">
            <i class="fas fa-user"></i>
            <span>Assigned to: <span id="modalTaskAssignee">Person</span></span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline">
          <i class="fas fa-comment"></i>
          <span>Comments (2)</span>
        </button>
        <button id="openWorkspaceBtn" class="btn btn-primary">
          <i class="fas fa-laptop"></i>
          <span>Open in Workspace</span>
        </button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/taskmanagement/taskmanagement.js') }}"></script>
</body>
</html>
